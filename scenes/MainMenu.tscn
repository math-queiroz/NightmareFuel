[gd_scene load_steps=16 format=3 uid="uid://co362w66hxapv"]

[ext_resource type="Theme" uid="uid://bg4jjqmkvq134" path="res://resources/theme.tres" id="1_g4pco"]
[ext_resource type="Shader" path="res://shaders/pixelated_background.gdshader" id="1_un6ai"]
[ext_resource type="Texture2D" uid="uid://bwmkwwc07ekih" path="res://sprites/main_menu_frame.png" id="3_150tr"]
[ext_resource type="Texture2D" uid="uid://dqmgphuqmrmo2" path="res://sprites/bottle2.png" id="3_qrn6p"]
[ext_resource type="Texture2D" uid="uid://djce3vnahjwk7" path="res://sprites/logo.png" id="4_hmekm"]
[ext_resource type="Texture2D" uid="uid://cgn36c3g7xii2" path="res://sprites/margin.png" id="5_318io"]
[ext_resource type="Texture2D" uid="uid://cuu37hajkvki" path="res://sprites/bottle1.png" id="6_yxk84"]
[ext_resource type="Texture2D" uid="uid://c6u7bmv1qgo57" path="res://sprites/bottle3.png" id="7_beoj3"]
[ext_resource type="Texture2D" uid="uid://dqry0da64ct8u" path="res://sprites/bottle4.png" id="8_yh411"]
[ext_resource type="PackedScene" uid="uid://bhpbkyb44blvd" path="res://scenes/components/screen_fader.tscn" id="11_3l0cf"]
[ext_resource type="Script" path="res://scripts/components/BusVolumeController.gd" id="11_l0omh"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_00t57"]
shader = ExtResource("1_un6ai")
shader_parameter/transparency = 1.0
shader_parameter/color0 = Color(0, 0, 0, 1)
shader_parameter/color1 = Color(0.33, 0.33, 0.33, 1)
shader_parameter/color2 = Color(0.66, 0.66, 0.66, 1)
shader_parameter/color3 = Color(1, 1, 1, 1)
shader_parameter/Direction = Vector2(1, 1)
shader_parameter/Speed = 15.0
shader_parameter/RandomSeed = 1.0
shader_parameter/thresholds = PackedFloat32Array(0.4, 0.5, 0.6)
shader_parameter/OCTAVE = 6
shader_parameter/pixel_size = 400
shader_parameter/dithering = 2.5

[sub_resource type="CanvasTexture" id="CanvasTexture_dtswa"]
diffuse_texture = ExtResource("5_318io")
texture_filter = 1

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ve85s"]
emission_shape = 3
emission_box_extents = Vector3(100, 1, 1)
particle_flag_disable_z = true
direction = Vector3(0, 1, 0)
spread = 0.0
gravity = Vector3(0, 98, 0)
initial_velocity_max = 200.0
angular_velocity_min = -100.0
angular_velocity_max = 100.0
orbit_velocity_min = 0.0
orbit_velocity_max = 0.0
scale_min = 0.5

[sub_resource type="GDScript" id="GDScript_bqerq"]
script/source = "extends Node

var start_game_level : String = \"res://scenes/levels/Level1.tscn\"
#const start_endless_level : PackedScene

@onready var slide_main : Node = $Main
@onready var slide_settings : Node = $Settings
@onready var slide_about : Node = $About

func start_game():
	%ScreenFader.play(\"fade\")
	%ScreenFader.connect(\"animation_finished\", func(_name):
		get_tree().change_scene_to_file(start_game_level)
	)

#func start_endless():
#	get_tree().change_scene_to_packed(start_endless_level)

func hide_all():
	slide_main.hide()
	slide_settings.hide()
	slide_about.hide()

func show_main():
	hide_all()
	slide_main.show()

func show_settings():
	hide_all()
	slide_settings.show()

func show_about():
	hide_all()
	slide_about.show()

func exit():
	get_tree().quit()
"

[node name="MainMenu" type="Control"]
clip_contents = true
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ScreenFader" parent="." instance=ExtResource("11_3l0cf")]
unique_name_in_owner = true

[node name="ColorRect" type="ColorRect" parent="."]
z_index = -10
material = SubResource("ShaderMaterial_00t57")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -127.0
offset_bottom = 193.0
grow_horizontal = 2
grow_vertical = 2

[node name="Sprite2D" type="Sprite2D" parent="."]
texture_filter = 1
position = Vector2(400, 240)
scale = Vector2(2, 2)
texture = ExtResource("3_150tr")

[node name="Frame" type="Sprite2D" parent="."]
position = Vector2(402, 240)
scale = Vector2(2, 2)
texture = SubResource("CanvasTexture_dtswa")

[node name="ParticleEmitters" type="Node" parent="."]

[node name="GPUParticles2D" type="GPUParticles2D" parent="ParticleEmitters"]
z_index = -1
position = Vector2(119, -67)
scale = Vector2(1.13324, 0.952922)
amount = 12
process_material = SubResource("ParticleProcessMaterial_ve85s")
texture = ExtResource("6_yxk84")
lifetime = 3.5
preprocess = 3.5
randomness = 1.0

[node name="GPUParticles2D2" type="GPUParticles2D" parent="ParticleEmitters"]
z_index = -1
position = Vector2(119, -67)
scale = Vector2(1.13324, 0.952922)
amount = 12
process_material = SubResource("ParticleProcessMaterial_ve85s")
texture = ExtResource("3_qrn6p")
lifetime = 3.5
preprocess = 3.5
randomness = 1.0

[node name="GPUParticles2D5" type="GPUParticles2D" parent="ParticleEmitters"]
z_index = -1
position = Vector2(671, -67)
scale = Vector2(1.13324, 0.952922)
amount = 12
process_material = SubResource("ParticleProcessMaterial_ve85s")
texture = ExtResource("7_beoj3")
lifetime = 3.5
preprocess = 3.5
randomness = 1.0

[node name="GPUParticles2D6" type="GPUParticles2D" parent="ParticleEmitters"]
z_index = -1
position = Vector2(671, -67)
scale = Vector2(1.13324, 0.952922)
amount = 12
process_material = SubResource("ParticleProcessMaterial_ve85s")
texture = ExtResource("8_yh411")
lifetime = 3.5
preprocess = 3.5
randomness = 1.0

[node name="Slider" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_bqerq")

[node name="Main" type="Control" parent="Slider"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_g4pco")

[node name="Sprite2DLogo" type="Sprite2D" parent="Slider/Main"]
z_index = 10
texture_filter = 1
position = Vector2(400, 154)
scale = Vector2(2, 2)
texture = ExtResource("4_hmekm")

[node name="VBoxContainer" type="VBoxContainer" parent="Slider/Main"]
z_index = 10
custom_minimum_size = Vector2(150, 0)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -53.5
offset_top = -210.0
offset_right = 53.5
offset_bottom = -89.0
grow_horizontal = 2
grow_vertical = 0

[node name="Start" type="Button" parent="Slider/Main/VBoxContainer"]
layout_mode = 2
theme = ExtResource("1_g4pco")
theme_override_font_sizes/font_size = 12
text = "Start Game"

[node name="Endless" type="Button" parent="Slider/Main/VBoxContainer"]
layout_mode = 2
theme = ExtResource("1_g4pco")
theme_override_font_sizes/font_size = 12
text = "Endless Mode"

[node name="Settings" type="Button" parent="Slider/Main/VBoxContainer"]
layout_mode = 2
theme = ExtResource("1_g4pco")
theme_override_font_sizes/font_size = 12
text = "Settings"

[node name="About" type="Button" parent="Slider/Main/VBoxContainer"]
layout_mode = 2
theme = ExtResource("1_g4pco")
theme_override_font_sizes/font_size = 12
text = "About
"

[node name="Exit" type="Button" parent="Slider/Main/VBoxContainer"]
layout_mode = 2
theme = ExtResource("1_g4pco")
theme_override_font_sizes/font_size = 12
text = "Exit
"

[node name="Settings" type="Control" parent="Slider"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_g4pco")

[node name="VBoxContainer" type="VBoxContainer" parent="Slider/Settings"]
z_index = 10
custom_minimum_size = Vector2(150, 0)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -75.0
offset_top = -60.0
offset_right = 75.0
offset_bottom = 61.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_g4pco")

[node name="SettingsLabel" type="Label" parent="Slider/Settings/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 12
text = "Settings"
horizontal_alignment = 1

[node name="HBoxContainer1" type="HBoxContainer" parent="Slider/Settings/VBoxContainer"]
layout_mode = 2

[node name="GeneralLabel" type="Label" parent="Slider/Settings/VBoxContainer/HBoxContainer1"]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
theme = ExtResource("1_g4pco")
text = "General Volume"

[node name="GeneralSlider" type="HSlider" parent="Slider/Settings/VBoxContainer/HBoxContainer1"]
layout_mode = 2
size_flags_horizontal = 3
theme = ExtResource("1_g4pco")
max_value = 1.0
step = 0.01
value = 0.5
script = ExtResource("11_l0omh")
bus_id = 0

[node name="HBoxContainer2" type="HBoxContainer" parent="Slider/Settings/VBoxContainer"]
layout_mode = 2

[node name="SoundLabel" type="Label" parent="Slider/Settings/VBoxContainer/HBoxContainer2"]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
size_flags_horizontal = 0
theme = ExtResource("1_g4pco")
text = "Sound Volume"

[node name="SoundSlider" type="HSlider" parent="Slider/Settings/VBoxContainer/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3
theme = ExtResource("1_g4pco")
max_value = 1.0
step = 0.01
value = 0.5
script = ExtResource("11_l0omh")
bus_id = 1

[node name="HBoxContainer3" type="HBoxContainer" parent="Slider/Settings/VBoxContainer"]
layout_mode = 2

[node name="MusicLabel" type="Label" parent="Slider/Settings/VBoxContainer/HBoxContainer3"]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
theme = ExtResource("1_g4pco")
text = "Music Volume"

[node name="MusicSlider" type="HSlider" parent="Slider/Settings/VBoxContainer/HBoxContainer3"]
layout_mode = 2
size_flags_horizontal = 3
theme = ExtResource("1_g4pco")
max_value = 1.0
step = 0.01
value = 0.5
script = ExtResource("11_l0omh")
bus_id = 1

[node name="Return" type="Button" parent="Slider/Settings/VBoxContainer"]
layout_mode = 2
theme = ExtResource("1_g4pco")
theme_override_font_sizes/font_size = 12
text = "Return"

[node name="About" type="Control" parent="Slider"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_g4pco")

[node name="Sprite2DLogo" type="Sprite2D" parent="Slider/About"]
texture_filter = 1
position = Vector2(400, 122)
scale = Vector2(2, 2)
texture = ExtResource("4_hmekm")

[node name="Label" type="Label" parent="Slider/About"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -124.0
offset_top = -4.0
offset_right = 124.0
offset_bottom = 146.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_g4pco")
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "A short game by math-queiroz
about serving drinks for monsters. Made as my
 submition for the first AcerolaJam (2024)

Big thanks for my friends for testing and giving feedback!



Source code avaliable at:
http://github.com/math-queiroz/NightmareFuel
"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Return" type="Button" parent="Slider/About"]
custom_minimum_size = Vector2(100, 0)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -49.0
offset_top = -65.0
offset_right = 49.0
offset_bottom = -49.0
grow_horizontal = 2
grow_vertical = 0
theme = ExtResource("1_g4pco")
theme_override_font_sizes/font_size = 12
text = "Return"

[connection signal="pressed" from="Slider/Main/VBoxContainer/Start" to="Slider" method="start_game"]
[connection signal="pressed" from="Slider/Main/VBoxContainer/Endless" to="Slider" method="start_endless"]
[connection signal="pressed" from="Slider/Main/VBoxContainer/Settings" to="Slider" method="show_settings"]
[connection signal="pressed" from="Slider/Main/VBoxContainer/About" to="Slider" method="show_about"]
[connection signal="pressed" from="Slider/Main/VBoxContainer/Exit" to="Slider" method="exit"]
[connection signal="pressed" from="Slider/Settings/VBoxContainer/Return" to="Slider" method="show_main"]
[connection signal="pressed" from="Slider/About/Return" to="Slider" method="show_main"]
